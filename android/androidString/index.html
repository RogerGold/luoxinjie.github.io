<!DOCTYPE html>
<html>
   <head>
	<meta name="generator" content="Hugo 0.16" />
        <title>Luoxinjie's Blog</title> 		 
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
		
        <link rel="stylesheet" type="text/css" href="/static/css/style.css" />  
        <link href='http://fonts.useso.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css' />
		<link href='http://fonts.useso.com/css?family=Wire+One' rel='stylesheet' type='text/css' />	
		
		<script type='text/javascript' src='/static/js/jQuery_Migrate_v1.4.1.js'></script>
		<script>jQueryWP = jQuery;</script>
        <script type='text/javascript' src='/static/js/jQuery_v1.12.4.js'></script>
		<script type='text/javascript' src='/static/js/main.js'></script>
		<script type='text/javascript' src='/static/js/wp_embed_min.js'></script>
		
         
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/wiresareobsolete.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.3"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
			img.wp-smiley,
			img.emoji {
				display: inline !important;
				border: none !important;
				box-shadow: none !important;
				height: 1em !important;
				width: 1em !important;
				margin: 0 .07em !important;
				vertical-align: -0.1em !important;
				background: none !important;
				padding: 0 !important;
			}
		</style>
		 
		
		<style type="text/css">
		     ul li{list-style: none;float:left;}
			.blog-title a, .blog-description, .social-icons a { color: #ffffff; }
		
			.site-head { background-color: #303538; }
		                
			section a { color: #4a4a4a; }
		
			a:hover, body .blog-title a:hover, body .social-icons a:hover { color: #57A3E8; }
			.main-navigation a { color: #ffffff; }
		    .main-navigation a { color: #50585D; }
            .home .main-navigation a { color: #ffffff; }
        </style>

    </head>

    <body class="home blog paged paged-2"> 
           <header id="masthead" role="banner" class="site-head site-header">
                <nav id="site-navigation" class="main-navigation" role="navigation">
                     <div>
                            <h1 class="menu-toggle">
                                <a class="icon-bars" href="#">
                                 <span class="hidden">Menu</span>
                                 </a>
                            </h1>
                           <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
                          <div class="menu-main-menu-container">
						   <ul id="menu-main-menu" class="menu">
								<li id="menu-item-878" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-878">
						           <a href="https://github.com/RogerGold" target="_blank"><img height="28" width="28" src="/media/github.png"  alt="github"/>
								   </a>
								</li>
								<li id="menu-item-878" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-878">
						           <a href="http://blog.csdn.net/luoxinjie" target="_blank"><img height="28" width="28" src="/media/scdn.png"  alt="csdn"/>
								   </a>								 
								</li>
                            </ul>
							</div>        
						</div>
				</nav>

				<div class="vertical-row">
					<div class="vertical">
					<div class="site-head-content inner">
                         <div>	
                             <img  src="/media/luoxinjie.png"  alt="photo"/>							 
					     </div>
					 <h1 class="blog-title"><a class="blog-logo" href='https://luoxinjie.github.io/' rel='home'>Luoxinjie</a></h1>
					 <h2 class="blog-description">A young people who like Android and Design.</h2>
					</div>
					</div>
				</div>
		   </header>
		   
	       <main id="content" class="content" role="main">
		   
		   
		   <article id="post-771" class="post-771 post type-post status-publish format-standard hentry category-android wpautop">
				<header class="post-header">
					<span class="post-meta">
						<span class="posted-on">
						
								<time class="entry-date published" datetime="2016-07-28T15:32:03+00:00">July 28, 2016
								</time>
							
						</span>
						<span class="byline"> by 
							<span class="author vcard">
								<a class="url fn n" href="https://github.com/RogerGold">
									Luoxinjie
								</a>
							</span>
						</span> 
						on 
						<a href="/android/" rel="category tag" target="_blank">
						Android
						</a>			
					</span>
							
						<h1 class="post-title">
							   
							     Android 字符串的一些使用技巧
						</h1>
         
				</header>
				<section class="post-content">
				    有时候字符串让人觉得很麻烦，知道一些小技巧，可以避免自己挖坑自己跳，比如一些显示效果本可以在string.xml中完成，我们又用了很多代码去实现，这样不仅维护变得困难，还有可能产生Bug。
					<p>
					   <h4>最好不要重用字符串</h4>
					   假设在登录和注册界面都有一个加载框，你如果使用同一个字符串R.string.loading：<br/>
					   <img src="/media/loading.png"  alt="loading"/><br/>
					    之后你又决定使用不同的字符串来区分登录和注册，那么你不得不新建两个字符串，并且在相应Java代码修改。
						如果一开始就使用两个不同的字符串，那么就在strings.xml文件修改就行了。<br/>
						 <img src="/media/loading_two.png"  alt="loading"/><br/>
					</p>
					<p>
					   <h4>用标识区分字符串名字</h4>
					   通过前缀或者注释来区分一下哪些字符串是在同一个页面的。<br/>
					    <img src="/media/string_separate.png"  alt="loading"/><br/>
						通过这样可以很快的识别出当前字符串属于哪个页面，清晰的标识也更易于维护和翻译成不同的语言。
					</p>
					<p>
					<h4>格式化字符串</h4>
					千万不用通过“+”运算来连接字符串产生新的字符串来使用，因为翻译成其他语言后，有时（其实是大多数情况）会狗屁不通。<br/>
					<img src="/media/formatString.PNG"  alt="loading"/><br/>
					正确的方法是用Resources#getString(int id, Object… formatArgs)。<br/>
					<img src="/media/formatStringOk.PNG"  alt="loading"/><br/>
					 再举个例子：<br/>
					 &lt;string name="today_state_string">您正与%1$d位朋友在跑步，本周排名提升了%2$.3f，获得%3$s勋章，等级为%4$c！&lt;/string> <br/> 
					从上面这行字符串的定义可以看出，格式化字符串资源的格式为：<br/>
					%+参数位置+$+格式化类型，其中：<br/>
					参 数  位 置：从1开始依次编号，String.forma方法的第二个参数为格式化的第一个参数，后面依次递增；<br/>
					格式化类型：<br/>
					s 字符串<br/>
					f 浮点数<br/>
					d 整型数<br/>
					c 字符类型<br/>
					</p>					
					<p>
					  <h4>处理单复数</h4>
					   最好不用在Java代码中处理单复数，因为不同的语言有不同的单复数规则，我们一般都是这样处理：<br/>
					   <img src="/media/PluralsError.PNG"  alt="loading"/><br/>
					   正确的做法是使用Resources#getQuantityString (int id, int quantity)。<br/>
					   <img src="/media/PluralsOk.PNG"  alt="loading"/><br/>					   
					</p>
					<p>
					<h4>词语的高亮处理</h4>
					   如果要改变TextView里的一些词语的颜色，ForegroundColorSpan并不总是最好的选择，最好使用HTML字体颜色标记你的strings.xml。<br/>
					   比如你想把Discover and play games.” 里的“Discover” 和 “play” 显示为蓝色，那么你可以这样：<br/>
				      <img src="/media/Stringcolor.PNG"  alt="loading"/><br/>
                       还支持&lt;b>&lt;/b>加粗字体, &lt;i>&lt;/i> 斜体字体,&lt;u>&lt;/u> 给字体加下划线等标签。 					  
					</p>
					<p>
					  <h4>数组</h4>
					     有时需要一个数组内容来给用户选择或者提示，为了使用和翻译方便，也可以写在strings.xml文件。<br/>
						 &lt;string-array name="planets_array"><br/>
							&lt;item>Mercury&lt;/item><br/>
							&lt;item>Venus&lt;/item><br/>
							&lt;item>Earth&lt;/item><br/>
							&lt;item>Mars&lt;/item><br/>
						&lt;/string-array><br/>
					然后在Java代码中获取：<br/>
					 String[] planets =  getResources().getStringArray(R.array.planets_array);
					</p>
					<div class="clear">&nbsp;</div>
				</section>
		</article>
		  
		   
		   
		
		
	    <div id="secondary" class="widget-area" role="complementary">
				<div class="clear">&nbsp;</div>
	    </div>  
		
		<footer id="colophon" class="site-footer" role="contentinfo">
			<div class="site-info inner">
				<section class="copyright">
					  <a href="https://github.com/RogerGold" target="_blank"><img height="28" width="28" src="/media/github.png"  alt="github"/>Contact Me</a>					
				</section>
			</div>
		</footer>
		
		</main>
		 <script type="text/javascript">
        
        var disqus_shortname = 'wiresareobsolete';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        
        </script>
	</body>
</html>